# フェーズ1 プロトタイプ デバッグガイド

このガイドは、Phase 1 プロトタイプ（ローカル2人対戦・当たり判定可視化）を **迷わず実行・確認** できるようにまとめた手順書です。

## 1. 実行方法（最短）

プロジェクトルート（`main.py` がある場所）で以下を実行します。

```bash
python main.py
```

- 画面が起動したら、P1/P2 を動かして重なり（押し合い）や攻撃判定の表示を確認します。
- 終了はウィンドウの×ボタンで閉じます。

## 2. 仮想環境（venv）の構築手順（推奨）

プロジェクトルートで、以下の順に実行します。

### 2.1 venv 作成

```bash
python -m venv venv
```

### 2.2 venv 有効化

Windows（PowerShell）の例：

```powershell
venv\Scripts\Activate.ps1
```

### 2.3 依存ライブラリのインストール

```bash
python -m pip install --upgrade pip
pip install -r requirements.txt
```

### 2.4 起動

```bash
python main.py
```

## 3. 操作方法 / デバッグ操作一覧

## 3.1 プレイヤー操作

| プレイヤー | 左右移動 | ジャンプ | しゃがみ | 攻撃（Hitbox表示） |
| --- | --- | --- | --- | --- |
| P1（青） | A / D | W | S | F |
| P2（赤） | ← / → | ↑ | ↓ | L |

## 3.2 デバッグ表示

| 機能 | キー | 説明 |
| --- | --- | --- |
| 判定枠線の表示切替 | F3 | Hurtbox / Pushbox / Hitbox の枠線をまとめて表示/非表示 |

## 3.3 画面上で確認できるもの

- **キャラクター本体**
  - P1：青い塗りつぶし矩形
  - P2：赤い塗りつぶし矩形
- **Hurtbox（食らい判定）**
  - 本体の枠線（白系）
- **Pushbox（押し合い判定）**
  - 青色の枠線
  - 2人が重なりそうになると、左右に押し戻されて重ならない
- **Hitbox（攻撃判定）**
  - 攻撃キー（P1:F / P2:L）を押した瞬間に、前方へ赤色の枠線が一定時間表示
  - 攻撃中はキャラクター色が少し明るくなる

## 4. トラブルシューティング

## 4.1 `python` が見つからない / 実行できない

- **確認**
  - 以下でバージョンが表示されるか確認します。

```bash
python --version
```

- **対処**
  - Python をインストールしていない場合は Python 3.10 以上をインストールしてください。
  - Windows の場合、インストール時に **"Add Python to PATH"** を有効にすると解決しやすいです。
  - すでに入っているのに `python` が通らない場合、`py -3.10 main.py` のように `py` ランチャーを試してください。

## 4.2 `import pygame` でエラーになる（Pygame が入っていない）

- **症状例**
  - `ModuleNotFoundError: No module named 'pygame'`

- **対処**
  - venv を有効化した上で、依存を入れ直します。

```bash
pip install -r requirements.txt
```

- **補足**
  - 本プロジェクトは `requirements.txt` に `pygame-ce` を記載しています。

## 4.3 画面が一瞬で閉じる

- エラーで終了している可能性があります。
- ターミナル（PowerShell / CMD）から `python main.py` を実行し、表示されるエラーメッセージを確認してください。

## 5. 実装ファイルの対応表（どこを直すべきか）

| 目的 | ファイル |
| --- | --- |
| 定数の調整（解像度、FPS、重力など） | `src/utils/constants.py` |
| プレイヤー挙動・判定枠（Hurt/Hit/Push） | `src/entities/player.py` |
| メインループ、入力、描画、F3切替 | `main.py` |
